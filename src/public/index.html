<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="description" content="BookHub - Discover and explore books" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>BookHub â€¢ Home</title>
  <link rel="stylesheet" href="/css/styles.css" />
</head>
<body>
  <header></header>

  <main class="container">
    <section class="hero">
      <h1>Discover your next great read</h1>
      <p id="home-quote" class="muted">Loading quote...</p>
    </section>

    <section aria-labelledby="featured-title">
      <h2 id="featured-title">Featured picks</h2>
      <div id="featured-list" class="grid"></div>
    </section>
  </main>

  <footer></footer>

  <script type="module" src="/js/main.mjs"></script>
  <script type="module">
    import { fetchJSON, qs } from "/js/utils.mjs";

   

    // Load featured (simple: pull a popular subject)
    (async () => {
      const container = qs("#featured-list");
      container.innerHTML = `<div class="loader" aria-hidden="true"></div>`;
      try {
        const data = await fetchJSON("/api/categories?name=fiction");
        const items = [...data.google.slice(0, 6), ...data.gutendex.slice(0, 6)].slice(0, 12);
        container.innerHTML = items.map(renderCard).join("");
      } catch {
        container.innerHTML = `<p role="status">Failed to load featured books.</p>`;
      }
    })();

    function renderCard(b) {
      const img = b.thumbnail || "/images/placeholder.png";
      const authors = b.authors?.join(", ") || "Unknown author";
      return `
        <a class="card fade-in" href="${b.detailsHref}" aria-label="${b.title}">
          <img src="${img}" alt="Cover of ${b.title}" loading="lazy"/>
          <h3>${b.title}</h3>
          <p class="muted">${authors}</p>
        </a>
      `;
    }
  </script>
</body>
</html>
